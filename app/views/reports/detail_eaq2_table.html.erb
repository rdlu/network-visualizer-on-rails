<!--Metas-->
<tr>
  <td style="font-weight: bold">Dia</td>
  <% @thresholds.each do |threshold|
    if threshold.id == 1 || threshold.id == 2
  %>
          <td colspan="2"  style="text-align: center; font-weight: bold">
          </td>
          <% else %>
          <td style="text-align: center; font-weight: bold">
          </td>
          <% end %>
  <% end %>
</tr>
<!--Medidas obtidas para cada dia do mÃªs -->
<% if Date.current.end_of_month != Date.parse(@month).end_of_month
     (1..Time.parse(@month).end_of_month.day).each do |day|
       result = ""
       uid = SecureRandom.uuid
%>

        <tr id="<%= Date.parse(@month).change(:day => day) %>_<%= uid %>">
          <td style="font-weight: bold"><%= day %> &nbsp;&nbsp;<span class="icon-search" title="Detalhar" onclick="popupTable('<%= Date.parse(@month).change(:day => day) %>_<%= uid %>')"></span>
            <div id="modal-<%= Date.parse(@month).change(:day => day) %>_<%= uid %>"class="modal hide fade"></div>
          </td>


          <% @thresholds.each do |threshold|
            if threshold.id == 1 || threshold.id == 2
          %>
                  <td style="text-align: center;" >a<%= result.html_safe %>
                  </td>
                  <td style="text-align: center;">b<%= result.html_safe %>
                  </td>
              <% else %>
                  <td style="text-align: center;">c<%= result.html_safe %>
                  </td>
              <% end %>
          <% end %>

        </tr>
    <% end %>
<% else
     (1..Date.current.day).each do |day| %>
        <tr>
          <td style="font-weight: bold"><%= day %></td>
          <% @thresholds.each do |threshold|
            if threshold.id == 1 || threshold.id == 2
          %>
                  <td style="text-align: center;">
                  </td>
                  <td style="text-align: center;">
                  </td>
              <% else %>
                  <td style="text-align: center; font-weight: bold">
                  </td>
              <% end %>
          <% end %>
        </tr>
    <% end %>
<% end %>
<tr>
  <td colspan="9" style="font-weight: bold; background-color: #777777;text-align: center"></td>
</tr>

<script>
    function popupTable(id)
    {
        var uid = [];
        uid = id.split('_');

        $.ajax({
            dataType: '',
            type: 'POST',
            url: "<%= detail_speed_type_eaq2_table_reports_url %>",
            data: { date: moment(uid[0]).format('DD/MM/YYYY') , id: uid[1], agent: <%= @type.to_json.html_safe %>, agent_type: <%= @agent_type.to_json.html_safe %>, state: <%= @states.to_json.html_safe %>, cn: <%= @cn.to_json.html_safe %>, goal_filter: <%= @goal_filter.to_json.html_safe %> },
            success: function(data){
                $('#modal-'+id).html(data).modal({show:true});
            }
        });

    }

</script>